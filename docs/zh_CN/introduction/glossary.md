# æœ¯è¯­è¡¨

æœ¬æ–‡æ¡£è§£é‡Šäº†æ–‡æ¡£ä¸­ä½¿ç”¨çš„å…³é”®æœ¯è¯­å’Œæ¦‚å¿µã€‚

## æ ¸å¿ƒæ¦‚å¿µ

### Active Record æ¨¡å¼
ä¸€ç§è®¾è®¡æ¨¡å¼ï¼Œæ•°æ®åº“è¡¨æˆ–è§†å›¾è¢«å°è£…æˆä¸€ä¸ªç±»ã€‚å› æ­¤ï¼Œä¸€ä¸ªå¯¹è±¡å®ä¾‹ç»‘å®šåˆ°è¡¨ä¸­çš„ä¸€è¡Œã€‚åˆ›å»ºå¯¹è±¡åï¼Œä¿å­˜æ—¶ä¼šå‘è¡¨ä¸­æ·»åŠ æ–°è¡Œã€‚åŠ è½½çš„ä»»ä½•å¯¹è±¡éƒ½ä»æ•°æ®åº“è·å–ä¿¡æ¯ï¼›å½“å¯¹è±¡æ›´æ–°æ—¶ï¼Œè¡¨ä¸­çš„å¯¹åº”è¡Œä¹Ÿä¼šæ›´æ–°ã€‚

**åœ¨ rhosocial-activerecord ä¸­ï¼š** ä½ çš„æ¨¡å‹ç±»ï¼ˆå¦‚ `User`ã€`Post`ï¼‰ç»§æ‰¿è‡ª `ActiveRecord` å¹¶è‡ªåŠ¨æ˜ å°„åˆ°æ•°æ®åº“è¡¨ã€‚

> ğŸ’¡ **AI æç¤ºè¯ï¼š** "è§£é‡Š Active Record æ¨¡å¼ï¼Œå¹¶ä¸ Repository æ¨¡å¼å’Œ Data Mapper æ¨¡å¼è¿›è¡Œæ¯”è¾ƒã€‚"

### Pydantic
ä¸€ä¸ªä½¿ç”¨ Python ç±»å‹æç¤ºè¿›è¡Œæ•°æ®éªŒè¯çš„ Python åº“ã€‚å®ƒç¡®ä¿æ•°æ®åœ¨è¿è¡Œæ—¶ç¬¦åˆæŒ‡å®šçš„ç±»å‹å’Œçº¦æŸã€‚

**ä¸»è¦ç‰¹æ€§ï¼š**
- ç±»å‹å®‰å…¨çš„æ•°æ®éªŒè¯
- JSON åºåˆ—åŒ–/ååºåˆ—åŒ–
- è‡ªåŠ¨é”™è¯¯ä¿¡æ¯
- é€šè¿‡ç±»å‹æç¤ºæä¾› IDE æ”¯æŒ

**æœ¬é¡¹ç›®çš„ç‰ˆæœ¬è¦æ±‚ï¼š**
- Python 3.8/3.9: `pydantic>=2.10.6`
- Python 3.10+: `pydantic>=2.12`
- æ”¯æŒ Python 3.13/3.14 è‡ªç”±çº¿ç¨‹ç‰ˆ

> ğŸ’¡ **AI æç¤ºè¯ï¼š** "ä»€ä¹ˆæ˜¯ Pydanticï¼Ÿå®ƒä¸ä¼ ç»Ÿçš„ Python dataclasses æˆ– marshmallow æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"

### ORMï¼ˆå¯¹è±¡å…³ç³»æ˜ å°„ï¼‰
ä¸€ç§è®©ä½ å¯ä»¥ä½¿ç”¨é¢å‘å¯¹è±¡èŒƒå¼è€Œä¸æ˜¯ SQL æ¥æŸ¥è¯¢å’Œæ“ä½œæ•°æ®åº“æ•°æ®çš„æŠ€æœ¯ã€‚

**ä¸ºä»€ä¹ˆè¦ç”¨ ORMï¼Ÿ**
- ç¼–å†™æ•°æ®åº“æ— å…³çš„ä»£ç 
- ä½¿ç”¨å¯¹è±¡è€Œä¸æ˜¯ SQL å­—ç¬¦ä¸²
- è‡ªåŠ¨æ•°æ®éªŒè¯å’Œç±»å‹å®‰å…¨
- æ›´å®¹æ˜“ç»´æŠ¤å’Œæµ‹è¯•

> ğŸ’¡ **AI æç¤ºè¯ï¼š** "ä½¿ç”¨ ORM å’Œç¼–å†™åŸå§‹ SQL ç›¸æ¯”æœ‰ä»€ä¹ˆä¼˜ç¼ºç‚¹ï¼Ÿ"

## æ¶æ„æœ¯è¯­

### Expression-Dialect åˆ†ç¦»
æˆ‘ä»¬çš„æ ¸å¿ƒæ¶æ„åŸåˆ™ï¼Œå°†**ä½ æƒ³è¦ä»€ä¹ˆ**ï¼ˆExpressionï¼‰ä¸**å¦‚ä½•ä¸ºå…¶ç”Ÿæˆ SQL**ï¼ˆDialectï¼‰åˆ†ç¦»ã€‚

**å¥½å¤„ï¼š**
- ç›¸åŒçš„ Python ä»£ç é€‚ç”¨äºä¸åŒçš„æ•°æ®åº“
- SQL ç”Ÿæˆæ˜¯é€æ˜ä¸”å¯æµ‹è¯•çš„
- æ˜“äºæ·»åŠ æ–°çš„æ•°æ®åº“åç«¯

> ğŸ’¡ **AI æç¤ºè¯ï¼š** "è§£é‡Š Expression-Dialect åˆ†ç¦»ï¼Œä»¥åŠä¸ºä»€ä¹ˆå®ƒæ¯” SQL å­—ç¬¦ä¸²æ‹¼æ¥æ›´å¥½ã€‚"

### FieldProxy
ä¸€ç§ç±»å‹å®‰å…¨çš„æ–¹å¼åœ¨æŸ¥è¯¢ä¸­å¼•ç”¨æ¨¡å‹å­—æ®µã€‚ä¸ä½¿ç”¨å®¹æ˜“æ‹¼é”™çš„å­—ç¬¦ä¸²åç§°ï¼Œè€Œæ˜¯ä½¿ç”¨ `User.c.username`ï¼Œå®ƒæä¾› IDE è‡ªåŠ¨è¡¥å…¨å’Œç±»å‹æ£€æŸ¥ã€‚

**ç¤ºä¾‹ï¼š**
```python
# âŒ åŸºäºå­—ç¬¦ä¸²ï¼ˆå®¹æ˜“å‡ºé”™ï¼‰
User.query().where("username == 'alice'")

# âœ… FieldProxyï¼ˆç±»å‹å®‰å…¨ï¼‰
User.query().where(User.c.username == "alice")
```

> ğŸ’¡ **AI æç¤ºè¯ï¼š** "FieldProxy å¦‚ä½•åœ¨ Python ä¸­å®ç°ç±»å‹å®‰å…¨çš„æŸ¥è¯¢æ„å»ºï¼Ÿ"

### ToSQLProtocol
æ‰€æœ‰è¡¨è¾¾å¼ç±»éƒ½å®ç°çš„åè®®ï¼ˆæ¥å£ï¼‰ã€‚å®ƒè¦æ±‚æœ‰ä¸€ä¸ª `.to_sql()` æ–¹æ³•ï¼Œè¿”å› SQL å­—ç¬¦ä¸²å’Œå‚æ•°ã€‚

**ç›®çš„ï¼š**
- è¡¨è¾¾å¼å’ŒåŸºäºè¡¨è¾¾å¼çš„æŸ¥è¯¢éƒ½å¯ä»¥åœ¨æ‰§è¡Œå‰æ˜¾ç¤ºå…¶ç”Ÿæˆçš„ SQL
- æ— éœ€æ•°æ®åº“è¿æ¥å³å¯è¿›è¡Œæµ‹è¯•
- ä½¿ SQL ç”Ÿæˆé€æ˜åŒ–

> ğŸ’¡ **AI æç¤ºè¯ï¼š** "Python ä¸­çš„ Protocol æ˜¯ä»€ä¹ˆï¼ŸToSQLProtocol å¦‚ä½•å®ç°é€æ˜çš„ SQL ç”Ÿæˆï¼Ÿ"

## è®¾è®¡åŸåˆ™

### åŒæ­¥å¼‚æ­¥å¯¹ç­‰ï¼ˆSync-Async Parityï¼‰
æˆ‘ä»¬çš„è®¾è®¡åŸåˆ™ï¼Œå³åŒæ­¥å’Œå¼‚æ­¥ API åº”è¯¥å…·æœ‰ï¼š
- **ç›¸åŒçš„æ–¹æ³•å**ï¼ˆæ²¡æœ‰ `_async` åç¼€ï¼‰
- **ç›¸åŒçš„åŠŸèƒ½**ï¼ˆåªéœ€ä¸º async æ·»åŠ  `await`ï¼‰
- **ç›¸åŒçš„ä»£ç æ¨¡å¼**

**ä¸ºä»€ä¹ˆï¼Ÿ** ä½¿å°†åŒæ­¥ä»£ç è½¬æ¢ä¸ºå¼‚æ­¥å˜å¾—å®¹æ˜“ï¼Œæ— éœ€å­¦ä¹ æ–°çš„ APIã€‚

> ğŸ’¡ **AI æç¤ºè¯ï¼š** "ä¸ºä»€ä¹ˆè¿™ä¸ªé¡¹ç›®è¦æ±‚åŒæ­¥å’Œå¼‚æ­¥ API ä½¿ç”¨ç›¸åŒçš„æ–¹æ³•åï¼Ÿè¿™æ ·åšæœ‰ä»€ä¹ˆå¥½å¤„ï¼Ÿ"

### æ¸è¿›å¼ ORMï¼ˆGradual ORMï¼‰
æˆ‘ä»¬çš„ç†å¿µï¼Œå³ä½ åº”è¯¥èƒ½å¤Ÿåœ¨ä¸åŒæŠ½è±¡çº§åˆ«ä½¿ç”¨ ORMï¼š
- **é«˜çº§ï¼š** å…·æœ‰éªŒè¯çš„å®Œæ•´ ActiveRecord å¯¹è±¡
- **ä¸­çº§ï¼š** å…·æœ‰ç±»å‹å®‰å…¨çš„æŸ¥è¯¢æ„å»º
- **ä½çº§ï¼š** åœ¨éœ€è¦æ€§èƒ½æ—¶ä½¿ç”¨åŸå§‹ SQL

ä½ é€‰æ‹©é€‚åˆä½ ç”¨ä¾‹çš„çº§åˆ«ã€‚

> ğŸ’¡ **AI æç¤ºè¯ï¼š** "ä»€ä¹ˆæ˜¯'æ¸è¿›å¼ ORM'ï¼Ÿå®ƒä¸å¼ºè¿«ä½ éµå¾ªå…¶æ¨¡å¼çš„ä¼ ç»Ÿ ORM æœ‰ä»€ä¹ˆä¸åŒï¼Ÿ"

## æ•°æ®åº“æœ¯è¯­

### Mixin
ä¸€ä¸ªé€šè¿‡ç»§æ‰¿ä¸ºå…¶ä»–ç±»æä¾›æ–¹æ³•å’Œå­—æ®µçš„ç±»ã€‚åœ¨æˆ‘ä»¬çš„é¡¹ç›®ä¸­ï¼ŒMixin æ·»åŠ é€šç”¨åŠŸèƒ½ï¼Œå¦‚æ—¶é—´æˆ³ã€UUID æˆ–è½¯åˆ é™¤ã€‚

**ç¤ºä¾‹ï¼š**
```python
class Post(TimestampMixin, UUIDMixin, ActiveRecord):
    # è‡ªåŠ¨è·å¾— created_atã€updated_at å’Œ UUID id
    title: str
```

> ğŸ’¡ **AI æç¤ºè¯ï¼š** "Python ä¸­çš„ Mixin æ¨¡å¼æ˜¯ä»€ä¹ˆï¼Ÿå®ƒå¦‚ä½•å®ç°ä»£ç å¤ç”¨ï¼Ÿ"

### åç«¯ï¼ˆBackendï¼‰
æ•°æ®åº“ç‰¹å®šçš„å®ç°ï¼Œå¤„ç†ï¼š
- æ•°æ®åº“è¿æ¥
- SQL æ‰§è¡Œ
- äº‹åŠ¡ç®¡ç†
- ç±»å‹é€‚é…

**å¯ç”¨çš„åç«¯ï¼š**
- SQLiteï¼ˆå†…ç½®ï¼‰
- MySQLï¼ˆå•ç‹¬åŒ…ï¼‰
- PostgreSQLï¼ˆå•ç‹¬åŒ…ï¼‰

> ğŸ’¡ **AI æç¤ºè¯ï¼š** "Backend åœ¨è¿™ä¸ªæ¶æ„ä¸­çš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿå®ƒå¦‚ä½•å®ç°æ•°æ®åº“æ— å…³æ€§ï¼Ÿ"

### æ–¹è¨€ï¼ˆDialectï¼‰
ä¸€ä¸ªçŸ¥é“å¦‚ä½•ç”Ÿæˆæ•°æ®åº“ç‰¹å®š SQL è¯­æ³•çš„ç»„ä»¶ã€‚ä¸åŒçš„æ•°æ®åº“æœ‰ä¸åŒçš„ï¼š
- å‚æ•°å ä½ç¬¦æ ·å¼ï¼ˆ`?` vs `$1` vs `:name`ï¼‰
- å‡½æ•°åç§°å’Œè¯­æ³•
- åˆ†é¡µæ–¹æ³•ï¼ˆLIMIT vs ROW_NUMBERï¼‰

> ğŸ’¡ **AI æç¤ºè¯ï¼š** "Dialect ç»„ä»¶å¦‚ä½•ä½¿ç›¸åŒçš„ Python ä»£ç é€‚ç”¨äºä¸åŒçš„æ•°æ®åº“ï¼Ÿ"

## å¸¸è§ç¼©å†™

- **AR**: Active Record
- **ORM**: Object-Relational Mappingï¼ˆå¯¹è±¡å…³ç³»æ˜ å°„ï¼‰
- **API**: Application Programming Interfaceï¼ˆåº”ç”¨ç¨‹åºæ¥å£ï¼‰
- **SQL**: Structured Query Languageï¼ˆç»“æ„åŒ–æŸ¥è¯¢è¯­è¨€ï¼‰
- **DB**: Databaseï¼ˆæ•°æ®åº“ï¼‰
- **CTE**: Common Table Expressionï¼ˆå…¬ç”¨è¡¨è¡¨è¾¾å¼ï¼ŒWITH å­å¥ï¼‰
- **CRUD**: Create, Read, Update, Deleteï¼ˆåˆ›å»ºã€è¯»å–ã€æ›´æ–°ã€åˆ é™¤ï¼‰
- **PK**: Primary Keyï¼ˆä¸»é”®ï¼‰
- **FK**: Foreign Keyï¼ˆå¤–é”®ï¼‰

## å¦è¯·å‚é˜…

- [æ¥è‡ªå…¶ä»–æ¡†æ¶](coming_from_frameworks.md) - å¦‚æœä½ ç†Ÿæ‚‰ Djangoã€SQLAlchemy æˆ– Rails
- [AI è¾…åŠ©å¼€å‘](ai_assistance.md) - å¦‚ä½•ä½¿ç”¨ AI è§£é‡Šè¿™äº›æ¦‚å¿µ
- [æ¶æ„è®¾è®¡](architecture.md) - æ·±å…¥ç³»ç»Ÿè®¾è®¡
