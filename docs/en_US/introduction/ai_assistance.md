# AI-Assisted Development

`rhosocial-activerecord` is designed to be **AI-Native** â€” built from the ground up to work seamlessly with AI code agents and editors.

## âš ï¸ Important Prerequisite

**Must be used in the repository directory**: The AI configurations (skills, commands, context files) of this project will only be automatically recognized and loaded when you **clone this repository and execute AI agent CLI commands in the repository root directory**, or open the project folder in an IDE.

```bash
# 1. Clone the repository
git clone https://github.com/rhosocial/python-activerecord.git
cd python-activerecord

# 2. Launch AI tools in this directory
claude        # Claude Code
opencode      # OpenCode
# Or open this folder in Cursor/Windsurf
```

## Why AI-Native?

Several design choices make this project particularly well-suited for AI assistance:

- **Explicit Type Annotations** â€” Full Pydantic v2 integration helps AI understand model structures
- **Transparent SQL** â€” All expressions and queries expose `.to_sql()` so AI can verify generated SQL before execution  
- **Clear Architecture** â€” Expression-Dialect separation makes the codebase easy for AI to navigate
- **Built-in Context** â€” Project ships with AI-specific configurations

## Built-in AI Configurations

When you clone this repository, the following AI configurations are automatically available:

```
python-activerecord/
â”œâ”€â”€ CLAUDE.md                    # Claude Code: project-level instructions
â”œâ”€â”€ AGENTS.md                    # Codex / general agents: project context
â”œâ”€â”€ .claude/
â”‚   â”œâ”€â”€ skills/                  # Claude Code: 12 specialized skill files
â”‚   â”‚   â”œâ”€â”€ user-activerecord-pattern/SKILL.md
â”‚   â”‚   â”œâ”€â”€ user-backend-development/SKILL.md
â”‚   â”‚   â”œâ”€â”€ user-enterprise-features/SKILL.md
â”‚   â”‚   â”œâ”€â”€ user-getting-started/SKILL.md
â”‚   â”‚   â”œâ”€â”€ user-modeling-guide/SKILL.md
â”‚   â”‚   â”œâ”€â”€ user-performance-tuning/SKILL.md
â”‚   â”‚   â”œâ”€â”€ user-query-advanced/SKILL.md
â”‚   â”‚   â”œâ”€â”€ user-relationships/SKILL.md
â”‚   â”‚   â”œâ”€â”€ user-testing-guide/SKILL.md
â”‚   â”‚   â”œâ”€â”€ user-troubleshooting/SKILL.md
â”‚   â”‚   â”œâ”€â”€ dev-sync-async-parity/SKILL.md
â”‚   â”‚   â”œâ”€â”€ dev-expression-dialect/SKILL.md
â”‚   â”‚   â”œâ”€â”€ dev-protocol-design/SKILL.md
â”‚   â”‚   â””â”€â”€ dev-testing-contributor/SKILL.md
â”‚   â””â”€â”€ commands/                # Claude Code: 13 slash commands
â”œâ”€â”€ .opencode/
â”‚   â”œâ”€â”€ commands/                # OpenCode: 13 slash commands
â”‚   â””â”€â”€ hints.yml               # OpenCode: keyword-triggered suggestions
â””â”€â”€ docs/
    â””â”€â”€ LLM_CONTEXT.md          # Structured reference for any LLM
```

### Supported Tools

| Tool | How to Start | Configuration Files |
|------|--------------|---------------------|
| [Claude Code](https://docs.anthropic.com/en/docs/claude-code) | `claude` | `CLAUDE.md`, `.claude/skills/`, `.claude/commands/` |
| [OpenCode](https://github.com/opencode-ai/opencode) | `opencode` | `.opencode/commands/`, `.opencode/hints.yml` |
| [Codex](https://github.com/openai/codex) | `codex` | `AGENTS.md` |
| [Cursor](https://cursor.com) | Open folder | `CLAUDE.md`, `AGENTS.md` via context |
| [Windsurf](https://windsurf.com) | Open folder | `CLAUDE.md`, `AGENTS.md` via context |

## Quick Start with AI

### 1. Generate a Model

Describe your domain and let AI generate the model:

> ðŸ’¡ **Try this prompt:**
> ```
> Create a blog system with User, Post, and Comment models.
> Users have many posts. Posts have many comments.
> Use timestamps and soft delete on all models.
> ```

### 2. Build a Complex Query

> ðŸ’¡ **Try this prompt:**
> ```
> Write a query that finds the top 5 authors by post count,
> excluding soft-deleted posts, then show me the generated SQL.
> ```

### 3. Explain an Error

> ðŸ’¡ **Try this prompt:**
> ```
> I'm getting "No backend configured" error. What's wrong and how do I fix it?
> ```

## Common AI Tasks

### For Application Developers

| Task | Example Prompt |
|------|----------------|
| **Generate Models** | "Create an Order model with customer info, line items, and timestamps" |
| **Build Queries** | "Find all users who signed up in the last 30 days with at least 3 orders" |
| **Add Relationships** | "Set up a many-to-many relationship between Post and Tag" |
| **Write Tests** | "Write tests for User model: save, query filters, and soft delete" |
| **Debug Issues** | "Explain this error: FieldProxy not found on User.c" |
| **Inspect SQL** | "Show me the SQL generated by this query" |

### For Contributors

| Task | Example Prompt |
|------|----------------|
| **New Backend** | "@backend-development Create a PostgreSQL backend following SQLite implementation" |
| **Add Expression** | "@expression-dialect Add JSON path expression support" |
| **Check Parity** | "@sync-async-parity Check if all methods have async counterparts" |
| **Run Tests** | "@testing-guide Run query tests and explain failures" |

## Tool-Specific Tips

### Claude Code

Reference skills explicitly for project-specific knowledge:

```
@user-getting-started       # Quick start guidance
@user-modeling-guide        # Model definition patterns
@user-query-advanced        # Complex query building
@dev-sync-async-parity      # API consistency rules
@dev-expression-dialect     # Expression system internals
```

Use slash commands for common tasks:

```
/gen:model User             # Generate User model
/test-feature query         # Run query tests
/check-sync-async           # Verify API parity
```

### OpenCode

Use namespaced commands:

**Development:**
- `/test` â€” Run all tests
- `/test:feature query` â€” Run specific feature tests
- `/lint` / `/lint:fix` â€” Code style checking
- `/type-check` â€” Type checking with mypy

**Code Generation:**
- `/gen:model` â€” Generate ActiveRecord model
- `/gen:query` â€” Generate preset query methods
- `/gen:relation` â€” Generate model relationships
- `/validate:model` â€” Validate model configuration

**Framework Development:**
- `/new-feature` â€” Scaffold a new feature
- `/new-backend` â€” Create new database backend
- `/check-sync-async` â€” Verify sync-async parity

### Cursor and Windsurf

These editors benefit from the project's type annotations and docstrings. For deeper context:

1. Add `docs/LLM_CONTEXT.md` or `AGENTS.md` to your editor's context/rules
2. Reference these files when asking AI for help with project-specific patterns

## Best Practices

**Be specific.** "Create a User model with email validation, optional age, timestamps, and soft delete" is better than "Create a User model."

**Ask for `.to_sql()`.** Always request the generated SQL to verify correctness:
> "Write this query, then show me the SQL it generates for SQLite and PostgreSQL."

**Reference context.** If AI generates incorrect code, point it to the right skill:
> "Check @sync-async-parity â€” this method needs an async counterpart."

**Use for auditing.** AI agents can review code for:
- Type annotation completeness
- Sync-async parity violations
- Missing tests
- `ToSQLProtocol` compliance

## Next Steps

- **New to the project?** See [Getting Started](../getting_started/README.md)
- **Want detailed examples?** Check the [Quick Start Guide](../getting_started/quick_start.md)
- **Need LLM context?** Feed [`../LLM_CONTEXT.md`](../LLM_CONTEXT.md) to your AI assistant

---

> ðŸ¤– **Throughout this documentation, look for ðŸ’¡ AI Prompt markers next to complex concepts. Feel free to ask your AI assistant to explain anything you don't understand.**
