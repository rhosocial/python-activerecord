# Querying Interface

`rhosocial-activerecord` provides a fluent, type-safe query API. This chapter details the three core query objects.

*   **[ActiveQuery (Model Query)](active_query.md)**
    *   The most commonly used query object, bound to ActiveRecord models, supporting filtering, sorting, joining, aggregation, and eager loading.
*   **[CTEQuery (Common Table Expressions)](cte_query.md)**
    *   Used for building complex recursive or analytical queries, returning results as dictionaries.
*   **[SetOperationQuery (Set Operations)](set_operation_query.md)**
    *   Handles UNION, INTERSECT, and EXCEPT set operations.

## Debugging & Inspecting SQL

All query objects (`ActiveQuery`, `CTEQuery`, `SetOperationQuery`) support calling the `to_sql()` method at any time. This is extremely helpful for debugging, allowing you to inspect the generated SQL statement and parameter tuple without actually executing the query.

```python
# Construct a query
query = User.query().where(User.c.age > 18).order_by((User.c.created_at, "DESC"))

# Inspect SQL and parameters
sql, params = query.to_sql()
print(f"SQL: {sql}")
# Output: SQL: SELECT * FROM users WHERE age > ? ORDER BY created_at DESC
print(f"Params: {params}")
# Output: Params: (18,)
```

> **Note**: The SQL statement format generated by `to_sql()` depends on the currently configured database backend.
> *   If a specific database is configured (e.g., SQLite, PostgreSQL), the generated SQL will conform to that database's dialect.
> *   If used without specifying a backend (typically for testing or demonstration), it may default to a Dummy backend that follows the SQL standard, generating standard SQL format.
